# Система заказа билетов

Веб-приложение для заказа билетов на мероприятия, написанное на Perl с использованием CGI.

## Требования

- Docker
- Docker Compose

## Установка и запуск через Docker

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd theater
```

2. Запустите приложение через Docker Compose:
```bash
docker-compose up -d
```

3. Приложение будет доступно по адресу:
```
http://localhost:8080
```

## Структура проекта

```
.
├── Dockerfile           # Конфигурация Docker-образа
├── docker-compose.yml  # Конфигурация Docker Compose
├── index.cgi          # Основной CGI-скрипт
├── database/
│   ├── init_db.pl     # Скрипт инициализации БД
│   ├── init.sql       # SQL-схема БД
│   └── theater.db     # База данных SQLite
├── templates/         # HTML-шаблоны
├── static/           # Статические файлы
│   ├── css/
│   ├── js/
│   └── images/
└── README.md
```

## Роли пользователей

1. Покупатель
   - Просмотр мероприятий
   - Добавление билетов в корзину
   - Оформление заказов

2. Менеджер
   - Создание мероприятий
   - Управление заказами

3. Администратор
   - Просмотр статистики
   - Управление пользователями

## Учетные данные по умолчанию

- Администратор:
  - Логин: admin
  - Пароль: admin123

## Управление контейнером

### Запуск
```bash
docker-compose up -d
```

### Остановка
```bash
docker-compose down
```

### Просмотр логов
```bash
docker-compose logs -f
```

### Перезапуск
```bash
docker-compose restart
```

## Решение проблем

1. Если приложение недоступно, проверьте логи:
```bash
docker-compose logs -f
```

2. Если нужно пересоздать базу данных:
```bash
docker-compose down
docker-compose up -d
```

3. Если нужно войти в контейнер:
```bash
docker-compose exec app bash
```

## Разработка

Для разработки рекомендуется использовать режим с монтированием локальных файлов:

```bash
docker-compose -f docker-compose.dev.yml up -d
```

Это позволит вносить изменения в код без пересборки образа. 